version: 2

sources:
  - name: ashp
    description: Current drug shortage list from ASHP.
    schema: sagerx_lake
    tables:
      - name: ashp_shortage_list
        desciption: Current drug shortage list from ASHP.
        columns:
          - name: name
            description: The name of the shortage as described by ASHP.
          - name: detail_url
            description: |
              The partial URL for the detail about the shortage.
              Requires a prefix to be a complete URL. That prefix is
              `https://www.ashp.org/drug-shortages/current-shortages/`.
              Also, this field is weirdly camel-case for some reason
              (Drug-Shortage-Detail.aspx?id=123) even though the actual
              link it takes you to is all lower case.
          - name: created_date
            description: The date the shortage record was created by ASHP.
          - name: updated_date
            description: The date the shortage record was last updated by ASHP.

      - name: ashp_shortage_list_ndcs
        desciption: Affected and available NDCs for each ASHP drug shortage.
        columns:
          - name: detail_url
            description: |
              The partial URL for the detail about the shortage.
              Contains an ID parameter which can be used as an index.
          - name: ndc
            description: The NDC relevant to the shortage.
          - name: ndc_type
            description: |
              The relationship between the NDC and the shortage. Can
              either be 'affected' or 'available'.
